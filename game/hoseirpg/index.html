<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã»ã†ã›ã„RPG ã€œç†ä¸å°½ãªæ—¥å¸¸ã€œ</title>
    <style>
        :root {
            --bg-color: #f0f4f8;
            --text-color: #333;
            --accent-color: #4a90e2;
            --danger-color: #e74c3c;
            --money-color: #27ae60;
        }

        body {
            font-family: 'Courier New', monospace, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .game-container {
            width: 100%;
            max-width: 600px;
            background: white;
            border: 2px solid #333;
            box-shadow: 10px 10px 0px rgba(0,0,0,0.1);
            padding: 20px;
            border-radius: 8px;
        }

        header {
            text-align: center;
            border-bottom: 2px dashed #ccc;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        h1 { margin: 0; font-size: 1.5rem; }
        .subtitle { font-size: 0.8rem; color: #666; }

        .status-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            background: #eee;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-label { font-size: 0.8rem; font-weight: bold; }
        .stat-value { font-size: 1.2rem; }
        #money { color: var(--money-color); }
        #stress { color: var(--danger-color); }

        .character-display {
            text-align: center;
            font-size: 3rem;
            margin: 10px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .job-title {
            text-align: center;
            font-weight: bold;
            background: #333;
            color: white;
            padding: 5px;
            border-radius: 4px;
            margin-bottom: 15px;
        }

        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 15px;
            font-size: 1rem;
            border: 2px solid #333;
            background: white;
            cursor: pointer;
            transition: all 0.1s;
            border-radius: 5px;
            font-weight: bold;
        }

        button:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        .btn-work { background-color: #e3f2fd; }
        .btn-rest { background-color: #e8f5e9; }
        .btn-job { background-color: #fff3e0; width: 100%; margin-top: 10px;}

        .log-area {
            height: 150px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            font-size: 0.85rem;
            background: #fafafa;
            border-radius: 4px;
        }

        .log-entry { margin-bottom: 5px; border-bottom: 1px dotted #eee; }
        .log-bad { color: var(--danger-color); }
        .log-good { color: var(--money-color); }
        .log-sys { color: #888; font-style: italic; }

        /* Job Change Modal */
        #jobModal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
        }
        .job-option {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 5px;
            cursor: pointer;
        }
        .job-option:hover { background: #f9f9f9; }
        .job-req { font-size: 0.8rem; color: #666; }

    </style>
</head>
<body>

<div class="game-container">
    <header>
        <h1>ã»ã†ã›ã„RPG</h1>
        <div class="subtitle">ç›®æ¨™ï¼š100ä¸‡å††è²¯ã‚ã¦ç¾å®Ÿé€ƒé¿ã™ã‚‹</div>
    </header>

    <div class="character-display" id="charFace">ğŸ˜‘</div>
    <div class="job-title">ç¾åœ¨ã®è·æ¥­: <span id="currentJobName">è‡ªå®…è­¦å‚™å“¡</span></div>

    <div class="status-panel">
        <div class="stat-item">
            <span class="stat-label">æ‰€æŒé‡‘</span>
            <span class="stat-value">Â¥<span id="money">0</span></span>
        </div>
        <div class="stat-item">
            <span class="stat-label">ã‚¹ãƒˆãƒ¬ã‚¹</span>
            <span class="stat-value"><span id="stress">0</span> / 100</span>
        </div>
    </div>

    <div class="actions">
        <button class="btn-work" onclick="workAction()">åƒã (Work)</button>
        <button class="btn-rest" onclick="restAction()">ã‚µãƒœã‚‹ (Rest)</button>
    </div>
    <button class="btn-job" onclick="openJobMenu()">ãƒãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚¯ã«è¡Œã (è»¢è·)</button>

    <h3>æ´»å‹•ãƒ­ã‚°</h3>
    <div class="log-area" id="gameLog">
        <div class="log-entry log-sys">ã‚²ãƒ¼ãƒ é–‹å§‹ã€‚ã»ã†ã›ã„ã¯å®Ÿå®¶ã®å­ä¾›éƒ¨å±‹ã§ç›®ã‚’è¦šã¾ã—ãŸ...</div>
    </div>
</div>

<div id="jobModal">
    <div class="modal-content">
        <h3>ãƒãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚¯ç«¯æœ«</h3>
        <p>è»¢è·å…ˆã‚’é¸ã‚“ã§ãã ã•ã„ï¼ˆæ‰‹æ•°æ–™ãŒã‹ã‹ã‚Šã¾ã™ï¼‰</p>
        <div id="jobList"></div>
        <button onclick="closeJobMenu()" style="margin-top:10px; width:100%;">é–‰ã˜ã‚‹</button>
    </div>
</div>

<script>
    // --- Game State ---
    let gameState = {
        money: 1000,
        stress: 0,
        jobId: 'neet',
        totalDays: 1
    };

    // --- Data: Jobs ---
    const jobs = {
        neet: {
            name: "è‡ªå®…è­¦å‚™å“¡",
            salaryMin: 0,
            salaryMax: 500,
            stressInc: 5,
            stressDec: 10,
            desc: "å®Ÿå®¶ã®è­¦å‚™ã€‚ãŸã¾ã«è¦ªã‹ã‚‰å°é£ã„(500å††)ãŒå‡ºã‚‹ã€‚",
            cost: 0,
            face: "ğŸ˜‘",
            events: [
                "è¦ªã€Œã„ã¤ã¾ã§å¯ã¦ã‚‹ã®ï¼ã€ â†’ ã‚¹ãƒˆãƒ¬ã‚¹+10",
                "å¤©äº•ã®ã‚·ãƒŸã‚’æ•°ãˆãŸã€‚ â†’ è™šç„¡æ„Ÿ",
                "ãƒãƒƒãƒˆã§ãƒ¬ã‚¹ãƒã«å‹åˆ©ã—ãŸï¼ â†’ ã‚¹ãƒˆãƒ¬ã‚¹-5",
                "å†·è”µåº«ã®ãƒ—ãƒªãƒ³ã‚’å‹æ‰‹ã«é£Ÿã¹ãŸã€‚ â†’ æº€è¶³"
            ]
        },
        cans: {
            name: "ç©ºãç¼¶æ‹¾ã„ãƒ—ãƒ­",
            salaryMin: 500,
            salaryMax: 1500,
            stressInc: 15,
            stressDec: 5,
            desc: "å…¬åœ’ã‚„è‡ªè²©æ©Ÿã®ä¸‹ã‚’æœç´¢ã€‚ãƒ©ã‚¤ãƒãƒ«ãŒå¤šã„ã€‚",
            cost: 0,
            face: "ğŸ§¢",
            events: [
                "è‡ªè²©æ©Ÿã®ä¸‹ã«500å††ç‰ç™ºè¦‹ï¼ â†’ è‡¨æ™‚åå…¥+500",
                "å°å­¦ç”Ÿã«æŒ‡ã‚’ã•ã•ã‚ŒãŸ... â†’ ã‚¹ãƒˆãƒ¬ã‚¹+20",
                "ç¸„å¼µã‚Šäº‰ã„ã§é‡è‰¯çŒ«ã«è² ã‘ãŸã€‚ â†’ ã‚¹ãƒˆãƒ¬ã‚¹+10",
                "ã‚¢ãƒ«ãƒŸç¼¶ã ã¨æ€ã£ãŸã‚‰ã‚¹ãƒãƒ¼ãƒ«ç¼¶ã ã£ãŸã€‚ â†’ å¾’åŠ´"
            ]
        },
        monitor: {
            name: "æ²»é¨“ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢",
            salaryMin: 8000,
            salaryMax: 15000,
            stressInc: 30,
            stressDec: 0,
            desc: "æ–°è–¬ã‚’è©¦ã™ç°¡å˜ãªãŠä»•äº‹ã€‚å‰¯ä½œç”¨ã¯æœªçŸ¥æ•°ã€‚",
            cost: 5000, // ç™»éŒ²æ–™
            face: "ğŸ¤¢",
            events: [
                "ä½“ãŒç·‘è‰²ã«ç™ºå…‰ã—å§‹ã‚ãŸæ°—ãŒã™ã‚‹ã€‚ â†’ ã‚¹ãƒˆãƒ¬ã‚¹+40",
                "ã¨ã¦ã¤ã‚‚ãªã„çœ æ°—ã«è¥²ã‚ã‚ŒãŸã€‚ â†’ å¼·åˆ¶ç¡çœ ",
                "çœ‹è­·å¸«ã•ã‚“ãŒå„ªã—ã‹ã£ãŸã€‚ â†’ ã‚¹ãƒˆãƒ¬ã‚¹-20",
                "å®Ÿã¯ãŸã ã®ãƒ“ã‚¿ãƒŸãƒ³å‰¤ã ã£ãŸã‚‰ã—ã„ã€‚ â†’ ãƒ©ãƒƒã‚­ãƒ¼"
            ]
        },
        apology: {
            name: "è¬ç½ªä»£è¡Œ",
            salaryMin: 10000,
            salaryMax: 30000,
            stressInc: 50,
            stressDec: 0,
            desc: "ä»–äººã®ä»£ã‚ã‚Šã«åœŸä¸‹åº§ã™ã‚‹ä»•äº‹ã€‚ãƒ¡ãƒ³ã‚¿ãƒ«å´©å£Šã®ãƒªã‚¹ã‚¯ã€‚",
            cost: 20000, // ã‚¹ãƒ¼ãƒ„ä»£
            face: "ğŸ™‡",
            events: [
                "åœŸä¸‹åº§ä¸­ã«é ­ã‚’è¸ã¾ã‚ŒãŸã€‚ â†’ ã‚¹ãƒˆãƒ¬ã‚¹MAX",
                "æ¶™ã‚’æµã—ã¦æ¼”æŠ€ã—ãŸã‚‰ãƒãƒƒãƒ—ã‚’è²°ã£ãŸï¼ â†’ åå…¥+5000",
                "ç›¸æ‰‹ãŒå…ƒåŒç´šç”Ÿã ã£ãŸ... â†’ ç²¾ç¥çš„ãƒ€ãƒ¡ãƒ¼ã‚¸ç‰¹å¤§",
                "è“å­æŠ˜ã‚Šã‚’æŠ•ã’ã¤ã‘ã‚‰ã‚ŒãŸã€‚ â†’ ãŠã‚„ã¤ã‚²ãƒƒãƒˆ"
            ]
        },
        influencer: {
            name: "åº•è¾ºã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼",
            salaryMin: -5000, // çµŒè²»ã§èµ¤å­—ã‚‚ã‚ã‚Šã†ã‚‹
            salaryMax: 100000, // ãƒã‚ºã‚Œã°ã§ã‹ã„
            stressInc: 20,
            stressDec: 10,
            desc: "ä¸€ç™ºé€†è»¢ç‹™ã„ã€‚ç‚ä¸Šãƒªã‚¹ã‚¯ã‚ã‚Šã€‚",
            cost: 50000, // æ©Ÿæä»£
            face: "ğŸ“¹",
            events: [
                "ã‚¢ãƒ³ãƒã‚³ãƒ¡ã§åŸ‹ã‚å°½ãã•ã‚ŒãŸã€‚ â†’ ã‚¹ãƒˆãƒ¬ã‚¹+30",
                "å‹•ç”»ãŒãƒ—ãƒãƒã‚ºã‚Šï¼ â†’ åå…¥+20000",
                "ä¼ç”»ã§è²·ã£ãŸæ¿€è¾›ã‚«ãƒ¬ãƒ¼ã§ãŠè…¹ã‚’å£Šã—ãŸã€‚ â†’ åŒ»ç™‚è²»-3000",
                "èª°ã‚‚è¦‹ã¦ã„ãªã„ãƒ©ã‚¤ãƒ–é…ä¿¡ã‚’3æ™‚é–“ã—ãŸã€‚ â†’ è™šç„¡"
            ]
        }
    };

    // --- Elements ---
    const els = {
        money: document.getElementById('money'),
        stress: document.getElementById('stress'),
        jobName: document.getElementById('currentJobName'),
        log: document.getElementById('gameLog'),
        face: document.getElementById('charFace'),
        jobModal: document.getElementById('jobModal'),
        jobList: document.getElementById('jobList')
    };

    // --- Core Functions ---

    function updateDisplay() {
        els.money.innerText = gameState.money.toLocaleString();
        els.stress.innerText = gameState.stress;
        els.jobName.innerText = jobs[gameState.jobId].name;
        els.face.innerText = jobs[gameState.jobId].face;
        
        // Color change for high stress
        if (gameState.stress > 80) {
            els.stress.style.fontWeight = 'bold';
            els.face.style.animation = 'shake 0.5s infinite';
        } else {
            els.stress.style.fontWeight = 'normal';
            els.face.style.animation = 'bounce 2s infinite';
        }
    }

    function addLog(text, type = 'normal') {
        const div = document.createElement('div');
        div.className = 'log-entry';
        if (type === 'good') div.classList.add('log-good');
        if (type === 'bad') div.classList.add('log-bad');
        div.innerText = `[Day ${gameState.totalDays}] ${text}`;
        els.log.insertBefore(div, els.log.firstChild);
    }

    function checkGameOver() {
        if (gameState.stress >= 100) {
            addLog("ã€é™ç•Œçªç ´ã€‘ã‚¹ãƒˆãƒ¬ã‚¹ãŒçˆ†ç™ºã—ãŸï¼", 'bad');
            addLog("ã»ã†ã›ã„ã¯å¤§å£°ã§å«ã³ãªãŒã‚‰è¡—ã‚’èµ°ã‚Šå›ã£ãŸ...", 'bad');
            
            const cost = Math.floor(gameState.money * 0.3) + 5000;
            gameState.money -= cost;
            if(gameState.money < 0) gameState.money = 0;
            
            gameState.stress = 0;
            addLog(`è­¦å¯Ÿã®ãŠä¸–è©±ã«ãªã‚Šã€è³ å„Ÿé‡‘ã¨æ²»ç™‚è²»ã§ ${cost}å†† å¤±ã£ãŸã€‚`, 'bad');
            
            // å¼·åˆ¶çš„ã«ãƒ‹ãƒ¼ãƒˆã«æˆ»ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
            if(gameState.jobId !== 'neet' && Math.random() > 0.5) {
                gameState.jobId = 'neet';
                addLog("ç¤¾ä¼šçš„ä¿¡ç”¨ã‚’å¤±ã„ã€ãƒ‹ãƒ¼ãƒˆã«æˆ»ã£ãŸã€‚", 'bad');
            }
        }

        if (gameState.money >= 1000000) {
            alert("ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼\n100ä¸‡å††è²¯ã¾ã‚Šã¾ã—ãŸã€‚\nã»ã†ã›ã„ã¯é«˜ã‚¹ãƒšãƒƒã‚¯ã‚²ãƒ¼ãƒŸãƒ³ã‚°PCã‚’è²·ã„ã€ãƒãƒƒãƒˆã®ä¸–ç•Œã¸æ—…ç«‹ã¡ã¾ã—ãŸã€‚\n(GAME CLEAR)");
            gameState.money = 0; // ãƒ«ãƒ¼ãƒ—
            addLog("â˜…ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼ã—ã‹ã—äººç”Ÿã¯ç¶šã...", 'good');
        }
    }

    // --- Action Functions ---

    function workAction() {
        const job = jobs[gameState.jobId];
        gameState.totalDays++;

        // Calculate Salary
        let earned = Math.floor(Math.random() * (job.salaryMax - job.salaryMin + 1)) + job.salaryMin;
        
        // Calculate Stress
        let stressAdd = job.stressInc + Math.floor(Math.random() * 10);
        
        // Random Events
        const eventRoll = Math.random();
        let eventLog = "";
        
        if (eventRoll < 0.3) {
            // Bad/Funny Event
            const evIndex = Math.floor(Math.random() * job.events.length);
            eventLog = job.events[evIndex];
            
            // Parse event effects simply based on text keywords (Simulated logic)
            if(eventLog.includes("ã‚¹ãƒˆãƒ¬ã‚¹+")) stressAdd += 10;
            if(eventLog.includes("ã‚¹ãƒˆãƒ¬ã‚¹MAX")) stressAdd += 99;
            if(eventLog.includes("åå…¥+")) earned += 5000;
            if(eventLog.includes("ãƒã‚¤ãƒŠã‚¹")) earned -= 3000;
        }

        gameState.money += earned;
        gameState.stress += stressAdd;

        addLog(`${job.name}ã¨ã—ã¦æ´»å‹•ã€‚${earned}å†† ç¨¼ã„ã ã€‚ (ã‚¹ãƒˆãƒ¬ã‚¹ +${stressAdd})`);
        if(eventLog) addLog(`ç™ºç”Ÿ: ${eventLog}`, 'bad');

        checkGameOver();
        updateDisplay();
    }

    function restAction() {
        gameState.totalDays++;
        const job = jobs[gameState.jobId];
        
        let heal = 15;
        if (gameState.jobId === 'neet') heal = 30; // NEET rests better
        
        // Using money to relieve stress?
        let cost = 0;
        if (gameState.money > 2000 && gameState.jobId !== 'neet') {
            cost = 2000;
            heal += 20;
            addLog(`2000å††ä½¿ã£ã¦è±ªéŠ(ç‰›ä¸¼ç‰¹ç››)ã—ãŸã€‚ã‚¹ãƒˆãƒ¬ã‚¹å¤§å¹…å›å¾©ã€‚`, 'good');
        } else {
            addLog(`å…¬åœ’ã§é³©ã‚’çœºã‚ã¦éã”ã—ãŸã€‚`);
        }

        gameState.money -= cost;
        gameState.stress -= heal;
        if (gameState.stress < 0) gameState.stress = 0;

        updateDisplay();
    }

    // --- Job System ---

    function openJobMenu() {
        els.jobList.innerHTML = '';
        
        for (const [key, job] of Object.entries(jobs)) {
            if (key === gameState.jobId) continue;

            const div = document.createElement('div');
            div.className = 'job-option';
            div.innerHTML = `
                <strong>${job.name}</strong> ${job.face}<br>
                <span class="job-req">è»¢è·è²»ç”¨: ${job.cost}å††</span><br>
                <span style="font-size:0.8rem">${job.desc}</span>
            `;
            div.onclick = () => changeJob(key);
            els.jobList.appendChild(div);
        }
        els.jobModal.style.display = 'flex';
    }

    function closeJobMenu() {
        els.jobModal.style.display = 'none';
    }

    function changeJob(newJobId) {
        const job = jobs[newJobId];
        if (gameState.money < job.cost) {
            alert("ãŠé‡‘ãŒè¶³ã‚Šã¾ã›ã‚“ï¼ä¸–ã®ä¸­é‡‘ã§ã™ã€‚");
            return;
        }

        if (confirm(`${job.name}ã«è»¢è·ã—ã¾ã™ã‹ï¼Ÿ\nè²»ç”¨: ${job.cost}å††`)) {
            gameState.money -= job.cost;
            gameState.jobId = newJobId;
            addLog(`ã€è»¢è·ã€‘${job.name} ã«ãªã‚Šã¾ã—ãŸï¼å¿ƒæ©Ÿä¸€è»¢é ‘å¼µã‚ã†ã€‚`, 'good');
            closeJobMenu();
            updateDisplay();
        }
    }

    // Init
    updateDisplay();

    // Add extra CSS animation keyframe
    const styleSheet = document.createElement("style");
    styleSheet.innerText = `
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
    `;
    document.head.appendChild(styleSheet);

</script>

</body>
</html>
