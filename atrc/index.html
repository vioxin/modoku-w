<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>NEON GENESIS - ULTIMATE</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Zen+Kaku+Gothic+New:wght@700&display=swap');

    :root {
        --neon-cyan: #00f3ff;
        --neon-pink: #ff0055;
        --neon-green: #0aff0a;
        --bg-dark: #050510;
    }

    * { box-sizing: border-box; }

    body {
        margin: 0; padding: 0;
        background-color: var(--bg-dark);
        color: #fff;
        font-family: 'Share Tech Mono', monospace;
        overflow-x: hidden;
        cursor: crosshair; /* カーソルを照準器に変更 */
    }

    /* === 全体エフェクト: CRTモニター風走査線 === */
    body::after {
        content: " ";
        display: block;
        position: fixed;
        top: 0; left: 0; bottom: 0; right: 0;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
        z-index: 9999;
        background-size: 100% 2px, 3px 100%;
        pointer-events: none;
    }

    /* === 背景: 電脳グリッド === */
    .cyber-grid {
        position: fixed;
        top: 0; left: 0; width: 100vw; height: 100vh;
        background: 
            linear-gradient(transparent 95%, var(--neon-cyan) 95%),
            linear-gradient(90deg, transparent 95%, var(--neon-cyan) 95%);
        background-size: 40px 40px;
        opacity: 0.15;
        transform: perspective(500px) rotateX(60deg);
        transform-origin: center bottom;
        animation: gridMove 2s linear infinite;
        z-index: -1;
    }
    @keyframes gridMove { from { background-position: 0 0; } to { background-position: 0 40px; } }

    /* === UI共通設定 === */
    section {
        min-height: 100vh;
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        position: relative;
        padding: 20px;
    }
    h2 { font-size: 2rem; color: var(--neon-cyan); text-shadow: 0 0 10px var(--neon-cyan); margin-bottom: 10px; }
    p { color: #aaa; text-align: center; max-width: 600px; margin-bottom: 30px; }
    
    button {
        background: transparent;
        border: 2px solid var(--neon-cyan);
        color: var(--neon-cyan);
        padding: 15px 40px;
        font-family: 'Share Tech Mono';
        font-size: 1.2rem;
        cursor: pointer;
        transition: 0.3s;
        box-shadow: 0 0 10px var(--neon-cyan);
    }
    button:hover { background: var(--neon-cyan); color: #000; }
    button:active { transform: scale(0.95); }

    /* === GIMMICK 1: EXPLOSION TEXT (Gravity) === */
    .word-container { display: flex; gap: 5px; perspective: 1000px; }
    .char {
        display: inline-block;
        font-size: 4rem;
        font-weight: bold;
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        user-select: none;
    }
    .exploded { opacity: 0; pointer-events: none; } /* JSでtransformを直接指定 */

    /* === GIMMICK 2: SEARCH LIGHT (X-Ray) === */
    .dark-room {
        width: 100%; height: 60vh;
        position: relative;
        background: #000;
        overflow: hidden;
        border: 1px solid #333;
    }
    .hidden-content {
        width: 100%; height: 100%;
        display: flex; justify-content: center; align-items: center; flex-direction: column;
        background: 
            radial-gradient(circle at center, #111, #000);
        /* 普段は見えない */
    }
    .secret-text {
        font-size: 3rem; color: var(--neon-green);
        text-shadow: 0 0 20px var(--neon-green);
        opacity: 0.1; /* 通常時はほぼ見えない */
        transition: opacity 0.2s;
    }
    /* 光が当たったときのエフェクト用レイヤー */
    .spotlight {
        position: absolute; top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none;
        background: radial-gradient(circle 150px at var(--x, 50%) var(--y, 50%), transparent 0%, rgba(0,0,0,0.98) 100%);
    }

    /* === GIMMICK 3: SINGULARITY (Black Hole) === */
    .bh-container { position: relative; width: 300px; height: 300px; display: flex; justify-content: center; align-items: center; }
    .singularity {
        width: 60px; height: 60px;
        background: #000;
        border-radius: 50%;
        box-shadow: 0 0 20px #fff, 0 0 50px var(--neon-pink), inset 0 0 20px var(--neon-pink);
        z-index: 10;
        cursor: pointer;
        transition: transform 0.2s;
    }
    .singularity:active { transform: scale(0.9); }
    
    .debris {
        position: absolute;
        font-size: 1.5rem;
        color: #fff;
        transition: all 0.8s ease-in;
    }

    /* ローディング演出 */
    #boot-screen {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #000; color: var(--neon-green);
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        z-index: 10000;
        font-size: 1.5rem;
    }
    .progress-bar {
        width: 200px; height: 4px; background: #333; margin-top: 20px;
        position: relative; overflow: hidden;
    }
    .progress-fill {
        position: absolute; top: 0; left: 0; height: 100%; width: 0%;
        background: var(--neon-green);
        animation: loading 2s ease-in-out forwards;
    }
    @keyframes loading { to { width: 100%; } }

</style>
</head>
<body>

    <div id="boot-screen">
        <div>SYSTEM BOOTING...</div>
        <div class="progress-bar"><div class="progress-fill"></div></div>
    </div>

    <div class="cyber-grid"></div>

    <section>
        <h2 style="color:var(--neon-pink)">01. CHAOS TEXT</h2>
        <p>テキストをタップすると、物理法則を無視して爆発します。<br>ボタンで復元できます。</p>
        
        <div class="word-container" id="chaosWord">
            <div class="char">C</div>
            <div class="char">H</div>
            <div class="char">A</div>
            <div class="char">O</div>
            <div class="char">S</div>
        </div>

        <button onclick="resetChaos()" style="margin-top:50px; border-color:var(--neon-pink); color:var(--neon-pink);">RESET SYSTEM</button>
    </section>

    <section>
        <h2>02. DARK SEARCH</h2>
        <p>暗闇をカーソル（指）で照らしてください。<br>隠された機密コードが見えます。</p>
        
        <div class="dark-room" id="darkRoom">
            <div class="hidden-content">
                <div class="secret-text" style="position:absolute; top:20%; left:10%;">UNKNOWN</div>
                <div class="secret-text" style="position:absolute; top:70%; left:70%;">ERROR</div>
                <div class="secret-text" style="position:absolute; top:40%; left:50%; font-size:5rem;">CODE: 777</div>
                <div class="secret-text" style="position:absolute; top:80%; left:20%;">GHOST</div>
            </div>
            <div class="spotlight"></div>
        </div>
    </section>

    <section>
        <h2 style="color:var(--neon-pink)">03. EVENT HORIZON</h2>
        <p>中心のコアをタップして、周囲のデータを吸い込んでください。</p>
        
        <div class="bh-container">
            <div class="singularity" onclick="activateHole()"></div>
            <div class="debris" style="top:0; left:50px;">DATA</div>
            <div class="debris" style="bottom:20px; right:50px;">FILE</div>
            <div class="debris" style="top:50%; left:-50px;">VIRUS</div>
            <div class="debris" style="top:-50px; left:50%;">MAIL</div>
            <div class="debris" style="bottom:-30px; left:20%;">LOG</div>
        </div>
    </section>

<script>
    // === 1. システム起動演出 ===
    window.addEventListener('load', () => {
        setTimeout(() => {
            const screen = document.getElementById('boot-screen');
            screen.style.transition = 'opacity 0.5s';
            screen.style.opacity = '0';
            setTimeout(() => screen.style.display = 'none', 500);
        }, 2200); // 2.2秒後に消える
    });

    // === 2. CHAOS TEXT (爆発) ===
    const chars = document.querySelectorAll('.char');
    
    // 文字ごとにクリックイベントを設定
    chars.forEach(char => {
        char.addEventListener('click', () => {
            // ランダムな方向に吹き飛ばす
            const rX = (Math.random() - 0.5) * 500;
            const rY = (Math.random() - 0.5) * 500;
            const rRot = (Math.random() - 0.5) * 360;
            
            char.style.transform = `translate(${rX}px, ${rY}px) rotate(${rRot}deg) scale(0)`;
            char.style.opacity = '0';
        });
    });

    function resetChaos() {
        chars.forEach(char => {
            char.style.transform = 'none';
            char.style.opacity = '1';
        });
    }

    // === 3. X-RAY SEARCH (スポットライト) ===
    const room = document.getElementById('darkRoom');
    const spotlight = document.querySelector('.spotlight');
    const secrets = document.querySelectorAll('.secret-text');

    function updateLight(x, y) {
        const rect = room.getBoundingClientRect();
        // 部屋の中での相対座標
        const relX = x - rect.left;
        const relY = y - rect.top;

        spotlight.style.setProperty('--x', relX + 'px');
        spotlight.style.setProperty('--y', relY + 'px');

        // ライトに近い文字だけハッキリ表示させる演出
        secrets.forEach(text => {
            const tRect = text.getBoundingClientRect();
            const tX = tRect.left + tRect.width/2;
            const tY = tRect.top + tRect.height/2;
            const dist = Math.hypot(x - tX, y - tY);
            
            if(dist < 150) {
                text.style.opacity = '1';
                text.style.color = '#fff';
                text.style.textShadow = '0 0 10px #fff';
            } else {
                text.style.opacity = '0.1';
                text.style.color = 'var(--neon-green)';
                text.style.textShadow = 'none';
            }
        });
    }

    room.addEventListener('mousemove', (e) => updateLight(e.clientX, e.clientY));
    room.addEventListener('touchmove', (e) => {
        e.preventDefault();
        updateLight(e.touches[0].clientX, e.touches[0].clientY);
    }, {passive: false});


    // === 4. BLACK HOLE (吸い込み) ===
    function activateHole() {
        const debrisList = document.querySelectorAll('.debris');
        const center = document.querySelector('.singularity');

        // 画面揺れ
        document.body.style.transform = "translate(5px, 5px)";
        setTimeout(() => document.body.style.transform = "none", 100);

        center.style.transform = "scale(1.5)";
        
        debrisList.forEach((d, i) => {
            setTimeout(() => {
                // 中心（ブラックホール）の座標へ移動しつつ縮小
                // 親要素がrelative + flex centerなので、
                // absoluteな要素を中央(top:50%, left:50%)に集めるには、
                // 単純にtop/left指定を変える
                d.style.top = "50%";
                d.style.left = "50%";
                d.style.transform = "translate(-50%, -50%) scale(0) rotate(720deg)";
                d.style.opacity = "0";
            }, i * 100);
        });

        setTimeout(() => {
            center.style.transform = "scale(1)";
            // 2秒後にリセット（遊べるように）
            setTimeout(resetHole, 2000);
        }, 1000);
    }

    function resetHole() {
        const debrisList = document.querySelectorAll('.debris');
        const positions = [
            {top:'0', left:'50px'},
            {bottom:'20px', right:'50px'},
            {top:'50%', left:'-50px'},
            {top:'-50px', left:'50%'},
            {bottom:'-30px', left:'20%'}
        ];

        debrisList.forEach((d, i) => {
            // 元の位置に戻す（簡易的）
            d.style.transform = "none";
            d.style.opacity = "1";
            // positionプロパティを初期値に戻すのはCSSクラス切り替えの方が楽だが
            // ここではstyleを直接クリアする
            d.style.top = positions[i].top || "auto";
            d.style.bottom = positions[i].bottom || "auto";
            d.style.left = positions[i].left || "auto";
            d.style.right = positions[i].right || "auto";
        });
    }

</script>
</body>
</html>
